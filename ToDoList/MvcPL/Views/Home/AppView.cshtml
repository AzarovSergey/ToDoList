
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>AppView</title>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/reset.css" rel="stylesheet" />
    <link href="~/Content/normalize.css" rel="stylesheet" />
    <link href="~/Content/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/Site.css" rel="stylesheet"/>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/Site.js"></script>
</head>
<body>
    <div id="background-container"></div>
    <div id="left-container">
        <div id="left">
            <div id="top-left">
                <span id="menu-toggle-button" class="fa fa-bars glyph-button"></span>
                <input type="text" class="input-search" />
                <span id="search-button" class="fa fa-search"></span>
            </div>
            <div id="folder-menu">
                <div>
                    <span id="user-info-button">
                        <img src="~/Content/Images/logo.png" width="40" height="40" />
                        <span id="username" class="folder-title">Sergey</span>
                        <span class="glyphicon glyphicon-chevron-down"></span>
                    </span>
                    <span id="activities-button" class="fa fa-bell-o"></span>
                </div>

                <div id="user-info">
                    <div class="user-info-item">btn1</div>
                    <div class="user-info-item">button 2</div>
                    <div class="user-info-item">3</div>
                </div>

                <div id="folder-container">
                    <div class="folder">
                        <span class="left-side">
                            <img src="~/Content/Images/logo.png" width="40" height="40" />
                            <span class="folder-title">Folder name</span>
                        </span>
                        <span class="right-side">
                            <span class="missed">3</span>
                            <span class="total">6</span>
                        </span>
                    </div>



                    <div class="folder">
                        <span class="left-side">
                            <img src="~/Content/Images/logo.png" width="40" height="40" />
                            <span class="folder-title">Folder with items</span>
                        </span>
                        <span class="right-side">
                            <span class="missed">3</span>
                            <span class="total">6</span>
                        </span>
                    </div>

                    <div class="folder">
                        <span class="left-side">
                            <img src="~/Content/Images/logo.png" width="40" height="40" />
                            <span class="folder-title">Folder name</span>
                        </span>
                        <span class="right-side">
                            <span class="missed">3</span>
                            <span class="total">6</span>
                        </span>
                    </div>
                </div>


            </div>
        </div>
    </div>
    <script>
        var selectedFolderIndex = NaN;

        $('#user-info').hide();
        $('#user-info-button').click(function () {
            $('#user-info').toggle();
        });

        var isLeftHide = false;
        $('#menu-toggle-button').click(function () {
            if (isLeftHide) {
                $('#left-container').css('width', '300px');
            } else {
                $('#left-container').css('width', '50px');
            }
            isLeftHide ^= true;
        });

        setInterval(DataRefresher, 5000);
        function DataRefresher() {
            $.ajax({
                url: "/folder/GetFillFolders/",
                success: function (result) {
                    if (result.redirect != undefined)
                        location.href = result.redirect;
                    //alert('---'+result+'---');
                    var folders = $('.folder');
                    folders.remove();
                    folders = $('#folder-container');
                    for (var item in result) {
                        folder = $('<div></div>').addClass('folder').html(
                            '<span class="left-side">\
                                <img src="/Content/Images/logo.png" width="40" height="40" />\
                                <span class="folder-title">'+result[item].Name+'</span>\
                            </span>\
                            <span class="right-side">\
                                <span class="missed">3</span>\
                                <span class="total">6</span>\
                            </span>'
                        );
                        folder.click(function () {
                            folders.children().css('background-color', 'white');
                            $(this).css('background-color', '#e0eefa');
                        });
                        folders.append(folder);
                        //alert(item);
                    }
                    
                },
                error: function (result) {
                    //alert("error");
                }
            });
        };
        DataRefresher();
    </script>
</body>
</html>
